<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:icon="clr-namespace:MANDUU.Helpers"
             xmlns:local="clr-namespace:MANDUU.Converters"
             x:Class="MANDUU.Views.MainPages.SubPages.GetVerified.IdentificationCardVerification">

    <ContentView.Resources>
        <ResourceDictionary>
            <local:InvertedBoolConverter x:Key="InvertedBoolConverter" />
        </ResourceDictionary>
    </ContentView.Resources>

    <VerticalStackLayout Margin="16" Spacing="16">

        <!-- Header -->
        <VerticalStackLayout Spacing="4">
            <Label Text="Identity Verification"
                   FontSize="20"
                   FontFamily="Finlandica"
                   FontAttributes="Bold"/>
            <Label Text="Upload a valid Identification Document"
                   FontFamily="Finlandica"
                   FontSize="14"
                   TextColor="{StaticResource Gray600}"/>
        </VerticalStackLayout>

        <!-- ID Type Picker -->
        <VerticalStackLayout Spacing="5">
            <Label Text="ID Type" 
                   FontFamily="Finlandica"
                   FontSize="14"
                   Margin="0,5,0,0"/>
            <Border StrokeThickness="1"
                    StrokeShape="RoundRectangle 10"
                    Stroke="{StaticResource Gray300}">
                <Picker Title="Select ID Type"
                        ItemsSource="{Binding IdType}"
                        SelectedItem="{Binding SelectedIdType}"
                        TitleColor="{StaticResource Gray500}"
                        Margin="10,5"/>
            </Border>
        </VerticalStackLayout>

        <!-- ID Number -->
        <VerticalStackLayout Spacing="5">
            <Label Text="ID Number"
                   FontFamily="Finlandica"
                   FontSize="14"
                   Margin="0,5,0,0"/>
            <Border StrokeShape="RoundRectangle 10"
                    StrokeThickness="1"
                    Stroke="{StaticResource Gray300}">
                <Entry Text="{Binding IdNumber}"
                       Placeholder="Enter ID number"
                       Margin="10,5"/>
            </Border>
        </VerticalStackLayout>

        <!-- Upload Section -->
        <VerticalStackLayout Spacing="10" Margin="0,10">

            <Label Text="Upload Document"
                   FontFamily="Finlandica"
                   FontSize="18"
                   FontAttributes="Bold"/>

            <!-- STATE: NOT UPLOADED -->
            <Border StrokeDashArray="4,4"
                    StrokeShape="RoundRectangle 12"
                    Stroke="{StaticResource Gray400}"
                    BackgroundColor="Transparent"
                    Padding="20"
                    IsVisible="{Binding IsDocumentSelected, Converter={StaticResource InvertedBoolConverter}}">
                <Border.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding ChooseFileCommand}"/>
                </Border.GestureRecognizers>
                <Grid RowDefinitions="Auto,Auto,Auto"
                      HorizontalOptions="Center"
                      RowSpacing="12">
                    <Label Text="{x:Static icon:Icons.UploadIcon}"
                           FontFamily="MaterialIcon"
                           FontSize="50"
                           TextColor="{StaticResource Gray500}"
                           HorizontalOptions="Center"/>
                    <Label Text="Tap to upload your ID document"
                           FontFamily="Finlandica"
                           FontSize="14"
                           TextColor="{StaticResource Gray600}"
                           HorizontalOptions="Center"
                           Grid.Row="1"/>
                    <Border Grid.Row="2"
                            BackgroundColor="{StaticResource Primary}"
                            StrokeShape="RoundRectangle 20"
                            Padding="16,8"
                            HorizontalOptions="Center">
                        <Label Text="Choose File"
                               TextColor="White"
                               FontFamily="Finlandica"
                               FontAttributes="Bold"
                               HorizontalOptions="Center"/>
                    </Border>
                </Grid>
            </Border>

            <!-- STATE: UPLOADED -->
            <Border StrokeShape="RoundRectangle 12"
                    StrokeThickness="0"
                    BackgroundColor="{StaticResource PrimaryLight400}"
                    Padding="20"
                    IsVisible="{Binding IsDocumentSelected}">
                <VerticalStackLayout Spacing="10" HorizontalOptions="Center">
                    <Label Text="{x:Static icon:Icons.tickIcon}"
                           FontFamily="MaterialIcon"
                           FontSize="48"
                           TextColor="{StaticResource Primary}"
                           HorizontalOptions="Center"/>
                    <Label Text="Document Uploaded Successfully!"
                           FontFamily="Finlandica"
                           FontSize="16"
                           FontAttributes="Bold"
                           HorizontalOptions="Center"
                           TextColor="{StaticResource Primary}"/>
                    <Label Text="{Binding SelectedDocument}"
                           FontSize="13"
                           TextColor="{StaticResource Gray700}"
                           HorizontalOptions="Center"
                           MaxLines="2"
                           LineBreakMode="TailTruncation"/>
                    <Button Text="â†» Change File"
                            Command="{Binding ChooseFileCommand}"
                            BackgroundColor="Transparent"
                            TextColor="{StaticResource Primary}"
                            FontAttributes="Bold"
                            FontSize="14"
                            HorizontalOptions="Center"
                            Margin="0,10"/>
                </VerticalStackLayout>
            </Border>

        </VerticalStackLayout>

    </VerticalStackLayout>
</ContentView>